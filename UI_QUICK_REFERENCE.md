# VersatilesPrint UI - Quick Reference

## ðŸŽ¯ Dashboard Overview

### **Client View** - For printing customers
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Dashboard - Welcome, Client Name                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  My Quota       â”‚  Quick Stats                  â”‚
â”‚  B&W: 150/3000  â”‚  Total Orders: 25             â”‚
â”‚  [â–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘] 5%   â”‚  This Month: 3                â”‚
â”‚  Color: 100/2000â”‚  Pending: 1                   â”‚
â”‚  [â–ˆâ–ˆâ–ˆâ–‘â–‘â–‘] 5%    â”‚  Completed: 20                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚  Create New Order Form                          â”‚
â”‚  [B&W] [Color] [Paper] [Submit]                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚  My Orders Table                                â”‚
â”‚  ID  â”‚ B&W â”‚ Color â”‚ Status â”‚ Date â”‚ Actions   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### **Agent View** - For order processors
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Dashboard - Welcome, Agent Name                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Active: 7   â”‚ Completed:20â”‚ Capacity: 7/10      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚  Assigned Orders Table                          â”‚
â”‚  ID â”‚ Client â”‚ B&W â”‚ Color â”‚ Status â”‚ Actions  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### **Administrator View** - For system management
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Dashboard - Welcome, Admin Name                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Users: 15 â”‚ Orders:50 â”‚ CSV: 2    â”‚ Clients: 10 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ [Orders] [Users] [CSV Imports]                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  All Orders / Users / CSV Imports               â”‚
â”‚  [Add New User] [Upload CSV] [Add Top-up]       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Table with full data and actions          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ðŸ“Š API Endpoints Used

| Endpoint | Method | Used By | Purpose |
|----------|--------|---------|---------|
| `/api/quotas` | GET | Client | Get client's quota info |
| `/api/orders` | GET | All | Get orders (filtered by role) |
| `/api/orders` | POST | Client | Create new order |
| `/api/orders/:id` | GET | All | Get order details |
| `/api/users` | GET | Admin | List all users |
| `/api/users` | POST | Admin | Create new user |
| `/api/users/:id` | GET | Admin | Get user details |
| `/api/users/:id` | PATCH | Admin | Update user |
| `/api/csv-imports` | GET | Admin | List CSV imports |
| `/api/csv-imports` | POST | Admin | Upload CSV |
| `/api/csv-imports/:id` | GET | Admin | Get import details |
| `/api/csv-imports/:id/validate` | POST | Admin | Validate CSV |
| `/api/quotas/topup` | POST | Admin | Add quota top-up |
| `/api/notifications` | GET | All | Get notifications |

---

## ðŸŽ¨ UI Components

### **Modals**
1. **User Modal** - Create/Edit users (Admin only)
2. **CSV Modal** - Upload and validate CSV files (Admin only)
3. **Order Modal** - View order details (All roles)
4. **Top-up Modal** - Add quota top-up (Admin only)

### **Status Badges**

#### Orders
- `pending` â†’ ðŸŸ¡ Yellow
- `validated` â†’ ðŸ”µ Blue
- `processing` â†’ ðŸ”µ Primary
- `completed` â†’ ðŸŸ¢ Green
- `cancelled` â†’ ðŸ”´ Red

#### CSV Imports
- `pending_validation` â†’ ðŸŸ¡ Yellow
- `validated` â†’ ðŸŸ¢ Green
- `rejected` â†’ ðŸ”´ Red

#### User Roles
- `Administrator` â†’ ðŸ”´ Red
- `Agent` â†’ ðŸ”µ Blue
- `Client` â†’ ðŸŸ¢ Green

#### User Status
- `Active` â†’ ðŸŸ¢ Green
- `Inactive` â†’ âšª Gray

---

## ðŸ”„ Data Refresh

| Action | Refresh Method |
|--------|---------------|
| Create Order | `location.reload()` |
| Create User | `location.reload()` |
| Upload CSV | `location.reload()` |
| Add Top-up | `location.reload()` |
| Update User | `location.reload()` |

**Manual Refresh:** Press `Ctrl + R` or `F5`

---

## ðŸŽ¯ Key Functions (JavaScript)

```javascript
// Modal Functions
openUserModal(userId?)         // Open user create/edit modal
openCsvModal()                 // Open CSV upload modal
openTopupModal()               // Open quota top-up modal

// Display Functions
viewOrderDetails(orderId)      // Show order details modal
reviewCsvImport(importId)      // Review pending CSV import
viewCsvDetails(importId)       // View CSV import details

// Form Functions
saveUser()                     // Save user (create/update)
uploadCsv()                    // Upload CSV file
validateCsv()                  // Validate and import CSV
saveTopup()                    // Add quota top-up

// Utility Functions
showLoading(text)              // Show loading overlay
hideLoading()                  // Hide loading overlay
showError(elementId, message)  // Show error message
hideError(elementId)           // Hide error message
formatDate(dateString)         // Format date for display
```

---

## ðŸ“‹ Field Mappings

### Order Object
```javascript
{
    id: 1,
    client_id: 2,
    agent_id: 3,
    status: "pending",
    bw_quantity: 100,        // â† Use this
    color_quantity: 50,      // â† Use this
    paper_dimensions: "A4",
    paper_type: "matte",
    finishing: "staple",
    created_at: "2025-10-20T10:00:00",
    updated_at: "2025-10-20T11:00:00",
    notes: "Special instructions",
    external_order_id: "EXT123",
    client_email: "client@example.com",  // â† Direct access
    agent_email: "agent@example.com"     // â† Direct access
}
```

### User Object
```javascript
{
    id: 1,
    email: "user@example.com",
    full_name: "John Doe",
    is_active: true,
    created_at: "2025-01-01T00:00:00",
    last_login: "2025-10-20T10:00:00",
    role: {
        id: 1,
        name: "Client"
    },
    role_name: "Client"  // â† Convenience field
}
```

### CSV Import Object
```javascript
{
    id: 1,
    original_filename: "orders.csv",
    status: "pending_validation",
    uploaded_at: "2025-10-20T10:00:00",
    validated_at: null,
    row_count: 50,
    valid_rows: 48,
    error_rows: 2,
    notes: "Admin review notes",
    uploaded_by_email: "admin@example.com",  // â† Direct access
    validated_by_email: null
}
```

### Quota Object
```javascript
{
    id: 1,
    client_id: 2,
    month: "2025-10-01",
    bw_limit: 3000,
    color_limit: 2000,
    bw_used: 150,
    color_used: 100,
    bw_available: 2850,
    color_available: 1900,
    bw_alert_sent: false,
    color_alert_sent: false
}
```

---

## ðŸŽ¨ CSS Classes

### Bootstrap Components
```css
.card                  /* Container cards */
.table-hover           /* Interactive tables */
.badge                 /* Status indicators */
.progress              /* Progress bars */
.modal                 /* Modal dialogs */
.btn                   /* Buttons */
.alert                 /* Messages */
```

### Custom Classes
```css
.clickable             /* Cursor pointer for rows */
.loading-overlay       /* Full-screen loading */
.loading-spinner       /* Loading animation */
```

---

## ðŸ” Debugging

### Browser Console
```javascript
// Check if functions are loaded
typeof openUserModal           // Should be "function"
typeof viewOrderDetails        // Should be "function"

// Test API manually
fetch('/api/orders').then(r => r.json()).then(console.log)
fetch('/api/users').then(r => r.json()).then(console.log)
```

### Common Issues

| Issue | Solution |
|-------|----------|
| Functions undefined | Hard refresh (Ctrl + Shift + R) |
| Data not loading | Check browser console for errors |
| 400/500 errors | Check Flask terminal logs |
| Empty tables | Verify API returns data |
| Modal not opening | Check Bootstrap is loaded |

---

## ðŸ“± Responsive Breakpoints

- **Desktop:** > 992px (Full tables, side-by-side cards)
- **Tablet:** 768px - 991px (Responsive tables)
- **Mobile:** < 768px (Stacked cards, horizontal scroll tables)

---

## âš¡ Performance Tips

1. **Minimize API calls** - Data loaded once on page load
2. **Use pagination** - For large datasets
3. **Cache in browser** - Until page reload
4. **Lazy load modals** - Only fetch details when opened
5. **Parallel requests** - Use `Promise.all()` for admin dashboard

---

## ðŸ”’ Security Notes

- All endpoints require authentication (`@login_required`)
- Admin functions require admin role (`@admin_required`)
- CSRF protection enabled for forms
- Password requirements enforced
- SQL injection protection via SQLAlchemy ORM

---

## ðŸ“ž Quick Actions

### As Client:
- **Create Order:** Fill form â†’ Click "Create Order"
- **View Order:** Click order row or "View" button

### As Agent:
- **View Order:** Click order row or "View" button
- **Process Orders:** (Future feature)

### As Admin:
- **Add User:** Click "Add New User" â†’ Fill form â†’ Save
- **Edit User:** Click "Edit" â†’ Modify â†’ Save
- **Upload CSV:** Click "Upload CSV" â†’ Select file â†’ Upload â†’ Validate
- **Add Top-up:** Click "Add Quota Top-up" â†’ Select client â†’ Enter amounts â†’ Save
- **Review CSV:** Click "Review" on pending imports

---

**Quick Tip:** Press `F12` to open Developer Tools for debugging!
